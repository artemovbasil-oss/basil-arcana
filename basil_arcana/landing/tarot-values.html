<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Карты Таро: значения и трактовки · BasilArcana</title>
    <meta
      name="description"
      content="Полный каталог карт Таро BasilArcana: значения, светлая и теневая стороны, советы и быстрый переход в мини-приложение Telegram."
    />
    <meta
      name="keywords"
      content="карты таро, значения таро, трактовка карт таро, арканы, tarot meanings, basil arcana"
    />
    <meta name="robots" content="index, follow, max-image-preview:large" />
    <meta name="theme-color" content="#111218" />
    <link rel="canonical" href="https://www.basilarcana.com/tarot-values.html" />
    <link rel="alternate" hreflang="ru" href="https://www.basilarcana.com/tarot-values.html?lang=ru" />
    <link rel="alternate" hreflang="kk" href="https://www.basilarcana.com/tarot-values.html?lang=kz" />
    <link rel="alternate" hreflang="en" href="https://www.basilarcana.com/tarot-values.html?lang=en" />
    <link rel="alternate" hreflang="x-default" href="https://www.basilarcana.com/tarot-values.html" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="BasilArcana" />
    <meta property="og:title" content="Карты Таро: значения и трактовки · BasilArcana" />
    <meta
      property="og:description"
      content="Изучайте значения карт Таро и читайте подробные трактовки с практическими советами от BasilArcana."
    />
    <meta property="og:url" content="https://www.basilarcana.com/tarot-values.html" />
    <meta property="og:image" content="https://cdn.basilarcana.com/cards/major/major_01_magician.webp" />
    <meta property="og:locale" content="ru_RU" />
    <meta property="og:locale:alternate" content="en_US" />
    <meta property="og:locale:alternate" content="kk_KZ" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Карты Таро: значения и трактовки · BasilArcana" />
    <meta
      name="twitter:description"
      content="Каталог карт Таро BasilArcana с детальными значениями, теневыми и светлыми аспектами и практичным советом."
    />
    <meta name="twitter:image" content="https://cdn.basilarcana.com/cards/major/major_01_magician.webp" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "@id": "https://www.basilarcana.com/tarot-values.html#webpage",
        "url": "https://www.basilarcana.com/tarot-values.html",
        "name": "Карты Таро: значения и трактовки · BasilArcana",
        "description": "Каталог карт Таро BasilArcana с детальными трактовками.",
        "inLanguage": ["ru", "en", "kk"],
        "isPartOf": {
          "@type": "WebSite",
          "@id": "https://www.basilarcana.com/#website",
          "url": "https://www.basilarcana.com/",
          "name": "BasilArcana"
        }
      }
    </script>
    <style>
      :root {
        --bg: #111218;
        --bg-soft: #1a1b23;
        --text: #f3f3f8;
        --text-soft: #bbb8ca;
        --accent: #b889ff;
        --accent-soft: #e3d2ff;
        --card: rgba(255, 255, 255, 0.06);
        --card-border: rgba(184, 137, 255, 0.32);
        --shadow: 0 18px 48px rgba(0, 0, 0, 0.42);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        min-height: 100%;
      }

      body {
        font-family: "Manrope", sans-serif;
        color: var(--text);
        background: radial-gradient(circle at 15% 20%, rgba(184, 137, 255, 0.12), transparent 40%),
          linear-gradient(150deg, #14151b, #1a1b24 55%, #15161d);
      }

      .stars,
      .stars::before,
      .stars::after {
        position: fixed;
        inset: 0;
        pointer-events: none;
        content: "";
        background-repeat: repeat;
      }

      .stars {
        z-index: -2;
        opacity: 0.22;
        background-image: radial-gradient(circle, rgba(255, 255, 255, 0.13) 1px, transparent 1px);
        background-size: 4px 4px;
      }

      .stars::before {
        z-index: -1;
        opacity: 0.28;
        background-image: radial-gradient(circle, rgba(255, 255, 255, 0.16) 1.3px, transparent 1.3px);
        background-size: 120px 120px;
      }

      .wrap {
        width: min(1120px, calc(100% - 2rem));
        margin: 0 auto;
        padding: 1.05rem 0 1.6rem;
      }

      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        padding: 0 0 0.75rem;
      }

      .logo {
        font-family: "Space Grotesk", sans-serif;
        font-weight: 600;
        letter-spacing: 0.02em;
        font-size: clamp(0.95rem, 1.35vw, 1.2rem);
        color: var(--accent-soft);
        text-decoration: none;
      }

      .langs {
        display: inline-flex;
        gap: 0.45rem;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid var(--card-border);
        border-radius: 999px;
        padding: 0.28rem;
      }

      .lang-btn {
        border: 0;
        background: transparent;
        color: var(--text-soft);
        border-radius: 999px;
        font: inherit;
        font-weight: 600;
        letter-spacing: 0.03em;
        padding: 0.46rem 0.82rem;
        cursor: pointer;
      }

      .lang-btn[aria-pressed="true"] {
        color: #100d17;
        background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      }

      .hero {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 1.2rem;
        align-items: end;
        border: 1px solid var(--card-border);
        border-radius: 20px;
        background: var(--card);
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow);
        padding: 1.35rem;
      }

      h1 {
        margin: 0;
        font-family: "Space Grotesk", sans-serif;
        font-size: clamp(1.5rem, 3vw, 2.5rem);
      }

      .lead {
        margin: 0.82rem 0 0;
        color: var(--text-soft);
        line-height: 1.58;
        font-size: 1.03rem;
        max-width: 74ch;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #0f0d16;
        background: linear-gradient(135deg, var(--accent), var(--accent-soft));
        border-radius: 12px;
        padding: 0.64rem 0.9rem;
        font-weight: 800;
        font-size: 0.9rem;
        box-shadow: 0 12px 24px rgba(184, 137, 255, 0.3);
        white-space: nowrap;
      }

      .section-title {
        margin: 1.4rem 0 0.9rem;
        color: var(--text-soft);
        font-size: 0.9rem;
        letter-spacing: 0.06em;
        text-transform: uppercase;
      }

      .gallery {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 1rem;
      }

      .tarot-card {
        border: 1px solid var(--card-border);
        border-radius: 16px;
        background: var(--card);
        padding: 0.68rem;
        cursor: pointer;
        text-align: left;
        color: inherit;
        transition: transform 0.22s ease, border-color 0.22s ease, background 0.22s ease;
      }

      .tarot-card:hover {
        border-color: rgba(227, 210, 255, 0.55);
        transform: translateY(-3px);
      }

      .tarot-card img {
        width: 100%;
        aspect-ratio: 3 / 5;
        object-fit: cover;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.06);
        display: block;
      }

      .tarot-card h3 {
        margin: 0.72rem 0 0;
        font-size: 1.02rem;
        line-height: 1.22;
        min-height: 2.45em;
      }

      .tarot-card p {
        margin: 0.4rem 0 0;
        color: var(--text-soft);
        font-size: 0.9rem;
        line-height: 1.4;
        min-height: 2.8em;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .status {
        margin-top: 0.9rem;
        color: var(--text-soft);
        font-size: 0.94rem;
      }

      .site-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem 1.05rem;
        margin: 1.35rem 0 0.65rem;
        padding: 0.66rem 0.72rem;
        border: 1px solid var(--card-border);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.06);
      }

      .site-links a {
        color: var(--accent-soft);
        text-decoration: none;
        border-bottom: 1px solid rgba(227, 210, 255, 0.38);
        font-size: 0.88rem;
        font-weight: 700;
      }

      .site-links a:hover {
        border-bottom-color: rgba(227, 210, 255, 0.82);
      }

      .footer {
        border-top: 1px solid rgba(184, 137, 255, 0.3);
        margin: 0 0 0.5rem;
        padding: 0.58rem 0 0.15rem;
        color: var(--text-soft);
        font-size: 0.82rem;
      }

      .bottom-cta {
        background: linear-gradient(135deg, #f5ebff, #c084ff 52%, #a45cf8);
        color: #10091c;
        border: 1px solid rgba(255, 255, 255, 0.35);
        box-shadow: 0 16px 34px rgba(164, 92, 248, 0.34);
        border-radius: 12px;
        padding: 0.65rem 0.8rem;
        margin-bottom: 0.4rem;
        display: flex;
        gap: 0.5rem;
        align-items: center;
        justify-content: space-between;
        font-weight: 700;
        font-size: 0.88rem;
      }

      .bottom-cta-links {
        display: inline-flex;
        align-items: center;
        gap: 0.65rem;
        flex-wrap: wrap;
        font-weight: 800;
      }

      .bottom-cta a {
        color: #10091c;
        text-decoration: none;
        border-bottom: 1px solid rgba(16, 9, 28, 0.4);
      }

      .bottom-cta-sep {
        opacity: 0.6;
      }

      .modal {
        position: fixed;
        inset: 0;
        background: rgba(8, 9, 13, 0.76);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        z-index: 10;
      }

      .modal.open {
        display: flex;
      }

      .modal-card {
        width: min(900px, 100%);
        max-height: calc(100svh - 2rem);
        overflow: auto;
        border: 1px solid var(--card-border);
        border-radius: 16px;
        background: #171821;
        box-shadow: 0 24px 58px rgba(0, 0, 0, 0.56);
        padding: 0.95rem;
      }

      .modal-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0.8rem;
      }

      .modal-close {
        border: 1px solid var(--card-border);
        background: rgba(255, 255, 255, 0.08);
        color: var(--text);
        border-radius: 10px;
        font: inherit;
        font-weight: 600;
        cursor: pointer;
        padding: 0.45rem 0.72rem;
      }

      .modal-grid {
        display: grid;
        grid-template-columns: 290px 1fr;
        gap: 0.9rem;
        margin-top: 0.85rem;
      }

      .modal-grid img {
        width: 100%;
        border-radius: 12px;
        object-fit: cover;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 0.42rem;
        margin: 0.5rem 0 0.6rem;
      }

      .chip {
        border: 1px solid var(--card-border);
        border-radius: 999px;
        padding: 0.25rem 0.55rem;
        color: var(--accent-soft);
        font-size: 0.78rem;
      }

      .meaning {
        margin: 0.35rem 0;
        color: var(--text-soft);
        line-height: 1.45;
        font-size: 0.93rem;
      }

      .meaning strong {
        color: var(--text);
      }

      .modal-actions {
        margin-top: 0.9rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.55rem;
      }

      .modal-btn {
        padding: 0.58rem 0.8rem;
        font-size: 0.84rem;
      }

      .modal-btn.alt {
        color: var(--text);
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid var(--card-border);
        box-shadow: none;
      }

      @media (max-width: 960px) {
        .hero {
          grid-template-columns: 1fr;
          align-items: start;
        }

        .gallery {
          grid-template-columns: repeat(3, minmax(0, 1fr));
          gap: 0.8rem;
        }

        .modal-grid {
          grid-template-columns: 1fr;
        }

        .modal-grid img {
          max-width: 320px;
        }

        .modal-actions {
          flex-direction: column;
        }

        .modal-btn {
          width: 100%;
        }

        .bottom-cta {
          flex-direction: column;
          align-items: flex-start;
        }
      }

      @media (max-width: 560px) {
        .wrap {
          width: min(1120px, calc(100% - 1rem));
          padding-top: 0.8rem;
        }

        .gallery {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .tarot-card h3 {
          font-size: 0.92rem;
        }

        .tarot-card p {
          font-size: 0.84rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="stars"></div>
    <main class="wrap">
      <header class="topbar">
        <a class="logo" href="./index.html" data-i18n="topLine"></a>
        <div class="langs" role="group" aria-label="Language switcher">
          <button class="lang-btn" data-lang="ru" aria-pressed="true">RU</button>
          <button class="lang-btn" data-lang="kz" aria-pressed="false">KZ</button>
          <button class="lang-btn" data-lang="en" aria-pressed="false">EN</button>
        </div>
      </header>

      <section class="hero">
        <div>
          <h1 data-i18n="title"></h1>
          <p class="lead" data-i18n="lead"></p>
        </div>
        <a class="btn" href="https://t.me/tarot_arkana_bot/app" target="_blank" rel="noreferrer" data-i18n="ctaMini" data-track="cta_tarot_values_mini"></a>
      </section>

      <p class="section-title" data-i18n="galleryLabel"></p>
      <section class="gallery" id="gallery"></section>
      <p class="status" id="status"></p>

      <nav class="site-links" aria-label="Внутренние ссылки">
        <a href="./news.html" data-i18n="navNews" data-track="nav_news"></a>
        <a href="./tarot-values.html" data-i18n="navTarot" data-track="nav_tarot"></a>
        <a href="./lenormand-values.html" data-i18n="navLenormand" data-track="nav_lenormand"></a>
        <a href="./academy.html" data-i18n="navAcademy" data-track="nav_academy"></a>
      </nav>

      <footer class="footer">
        <span data-i18n="footer"></span>
      </footer>
      <section class="bottom-cta">
        <span data-i18n="devCta"></span>
        <div class="bottom-cta-links">
          <a href="mailto:basiluxd@gmail.com" data-track="cta_email">basiluxd@gmail.com</a>
          <span class="bottom-cta-sep">•</span>
          <a href="https://t.me/uxd_ink" target="_blank" rel="noreferrer" data-track="cta_telegram">@uxd_ink</a>
        </div>
      </section>
    </main>

    <div class="modal" id="modal" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-top">
          <h2 id="modalTitle"></h2>
          <button class="modal-close" id="modalClose" data-i18n="close"></button>
        </div>
        <div class="modal-grid">
          <img id="modalImg" alt="Tarot card" />
          <div>
            <div class="chips" id="modalKeywords"></div>
            <p class="meaning" id="modalDetailed"></p>
            <p class="meaning" id="modalGeneral"></p>
            <p class="meaning" id="modalLight"></p>
            <p class="meaning" id="modalShadow"></p>
            <p class="meaning" id="modalAdvice"></p>
            <div class="modal-actions">
              <a
                class="btn modal-btn alt"
                href="https://t.me/tarot_arkana_bot"
                target="_blank"
                rel="noreferrer"
                data-i18n="modalCtaBot"
                data-track="cta_modal_bot"
              ></a>
              <a
                class="btn modal-btn"
                href="https://t.me/tarot_arkana_bot/app"
                target="_blank"
                rel="noreferrer"
                data-i18n="modalCtaMini"
                data-track="cta_modal_mini"
              ></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const uiCopy = {
        ru: {
          topLine: "Магический плюс вайб",
          title: "Карты Таро: значения и трактовки",
          lead: "Выбирай карту по интуиции: здесь собраны арканы с живыми трактовками, светлой и теневой стороной и конкретным шагом на сейчас.",
          ctaMini: "Получить бесплатный расклад",
          galleryLabel: "Галерея карт Таро",
          close: "Закрыть",
          loading: "Загружаем карты...",
          error: "Не удалось загрузить карты. Попробуйте обновить страницу.",
          modalGeneral: "Общее значение",
          modalLight: "Светлая грань",
          modalShadow: "Теневая грань",
          modalAdvice: "Совет",
          modalCtaBot: "Перейти в бот",
          modalCtaMini: "Получить бесплатный расклад",
          navNews: "Новости",
          navTarot: "Карты Таро",
          navLenormand: "Колода Ленорман",
          navAcademy: "Академия Таро",
          footer: "BasilArcana · RU / KZ / EN · Telegram-first experience",
          devCta: "Разработка ботов и приложений на заказ под ключ — напишите нам"
        },
        kz: {
          topLine: "Магия плюс vibe",
          title: "Таро карталары: мағынасы мен түсіндірмесі",
          lead: "Картаны түйсікпен таңдаңыз: аркандардың мағынасы, жарық және көлеңке қыры, әрі нақты келесі қадам осында.",
          ctaMini: "Тегін таралым алу",
          galleryLabel: "Таро карталары галереясы",
          close: "Жабу",
          loading: "Карталар жүктелуде...",
          error: "Карталарды жүктеу мүмкін болмады. Бетті жаңартып көріңіз.",
          modalGeneral: "Жалпы мағына",
          modalLight: "Жарық қыры",
          modalShadow: "Көлеңке қыры",
          modalAdvice: "Кеңес",
          modalCtaBot: "Ботқа өту",
          modalCtaMini: "Тегін таралым алу",
          navNews: "Жаңалықтар",
          navTarot: "Таро карталары",
          navLenormand: "Ленорман колодасы",
          navAcademy: "Таро академиясы",
          footer: "BasilArcana · RU / KZ / EN · Telegram-first experience",
          devCta: "Тапсырыс бойынша bot және app толық әзірлеу — бізге жазыңыз"
        },
        en: {
          topLine: "Magic plus vibe",
          title: "Tarot Cards: Meanings and Interpretations",
          lead: "Choose a card by intuition and explore each arcana through practical meanings, light and shadow sides, and an actionable next step.",
          ctaMini: "Get a free tarot reading",
          galleryLabel: "Tarot gallery",
          close: "Close",
          loading: "Loading cards...",
          error: "Failed to load cards. Please refresh the page.",
          modalGeneral: "General meaning",
          modalLight: "Light side",
          modalShadow: "Shadow side",
          modalAdvice: "Advice",
          modalCtaBot: "Go to bot",
          modalCtaMini: "Get a free tarot reading",
          navNews: "News",
          navTarot: "Tarot cards",
          navLenormand: "Lenormand deck",
          navAcademy: "Tarot Academy",
          footer: "BasilArcana · RU / KZ / EN · Telegram-first experience",
          devCta: "Turnkey custom bot and app development — write to us"
        }
      };

      const LANG_STORAGE_KEY = "basilarcana_lang";
      let activeLang = "ru";
      let cards = [];
      const cardImageAlias = {
        major_10_wheel: "major_10_wheel_of_fortune",
      };

      const galleryNode = document.getElementById("gallery");
      const statusNode = document.getElementById("status");
      const modalNode = document.getElementById("modal");

      function trackEvent(link, eventName) {
        if (typeof gtag !== "function") {
          return;
        }
        gtag("event", "cta_click", {
          event_category: "engagement",
          event_label: eventName,
          destination: link,
          language: activeLang,
        });
      }

      function toAbsoluteCdn(url) {
        if (!url) {
          return "";
        }
        if (url.startsWith("http://") || url.startsWith("https://")) {
          return url;
        }
        return `https://cdn.basilarcana.com/${url.replace(/^\/+/, "")}`;
      }

      function cardImageUrl(cardKey, cardData) {
        if (cardData && cardData.imageUrl) {
          return toAbsoluteCdn(cardData.imageUrl);
        }
        const suit = cardKey.split("_")[0];
        const resolvedKey = cardImageAlias[cardKey] || cardKey;
        return `https://cdn.basilarcana.com/cards/${suit}/${resolvedKey}.webp`;
      }

      function openModal(cardKey, cardData) {
        const langPack = uiCopy[activeLang] || uiCopy.ru;
        document.getElementById("modalTitle").textContent = cardData.title;
        document.getElementById("modalImg").src = cardImageUrl(cardKey, cardData);
        document.getElementById("modalDetailed").textContent = cardData.detailedDescription || "";
        document.getElementById("modalGeneral").innerHTML = `<strong>${langPack.modalGeneral}:</strong> ${cardData.meaning?.general || ""}`;
        document.getElementById("modalLight").innerHTML = `<strong>${langPack.modalLight}:</strong> ${cardData.meaning?.light || ""}`;
        document.getElementById("modalShadow").innerHTML = `<strong>${langPack.modalShadow}:</strong> ${cardData.meaning?.shadow || ""}`;
        document.getElementById("modalAdvice").innerHTML = `<strong>${langPack.modalAdvice}:</strong> ${cardData.meaning?.advice || ""}`;

        const keywordsNode = document.getElementById("modalKeywords");
        keywordsNode.innerHTML = "";
        (cardData.keywords || []).forEach((keyword) => {
          const chip = document.createElement("span");
          chip.className = "chip";
          chip.textContent = keyword;
          keywordsNode.appendChild(chip);
        });

        modalNode.classList.add("open");
        modalNode.setAttribute("aria-hidden", "false");
      }

      function closeModal() {
        modalNode.classList.remove("open");
        modalNode.setAttribute("aria-hidden", "true");
      }

      function renderCards() {
        galleryNode.innerHTML = "";
        cards.forEach(([cardKey, cardData]) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "tarot-card";
          button.innerHTML = `
            <img src="${cardImageUrl(cardKey, cardData)}" loading="lazy" alt="${cardData.title}" />
            <h3>${cardData.title}</h3>
            <p>${(cardData.meaning?.general || "").slice(0, 88)}</p>
          `;
          button.addEventListener("click", () => openModal(cardKey, cardData));
          galleryNode.appendChild(button);
        });
      }

      async function loadCards(lang) {
        const langPack = uiCopy[lang] || uiCopy.ru;
        statusNode.textContent = langPack.loading;
        try {
          const res = await fetch(`https://cdn.basilarcana.com/data/cards_${lang}.json`, {
            cache: "no-store",
          });
          if (!res.ok) {
            throw new Error(`Failed with status ${res.status}`);
          }
          const payload = await res.json();
          cards = Object.entries(payload).filter(([, card]) => card.deck !== "lenormand");
          renderCards();
          statusNode.textContent = "";
        } catch (err) {
          cards = [];
          galleryNode.innerHTML = "";
          statusNode.textContent = langPack.error;
        }
      }

      function updateInternalLinks(lang) {
        const navLinks = [
          { selector: '[data-track="nav_news"]', path: "./news.html" },
          { selector: '[data-track="nav_tarot"]', path: "./tarot-values.html" },
          { selector: '[data-track="nav_lenormand"]', path: "./lenormand-values.html" },
          { selector: '[data-track="nav_academy"]', path: "./academy.html" },
          { selector: '.logo', path: "./index.html" },
        ];
        navLinks.forEach(({ selector, path }) => {
          const node = document.querySelector(selector);
          if (!node) {
            return;
          }
          const link = new URL(path, window.location.href);
          if (lang && lang !== "ru") {
            link.searchParams.set("lang", lang);
          }
          node.setAttribute("href", `${link.pathname}${link.search}`);
        });
      }

      function applyLang(lang) {
        activeLang = uiCopy[lang] ? lang : "ru";
        const langPack = uiCopy[activeLang];
        document.documentElement.lang = activeLang === "kz" ? "kk" : activeLang;
        document.querySelectorAll("[data-i18n]").forEach((node) => {
          node.textContent = langPack[node.dataset.i18n] || "";
        });
        document.querySelectorAll(".lang-btn").forEach((btn) => {
          btn.setAttribute("aria-pressed", String(btn.dataset.lang === activeLang));
        });
        const url = new URL(window.location.href);
        if (activeLang === "ru") {
          url.searchParams.delete("lang");
        } else {
          url.searchParams.set("lang", activeLang);
        }
        window.history.replaceState({}, "", url.toString());
        window.localStorage.setItem(LANG_STORAGE_KEY, activeLang);
        updateInternalLinks(activeLang);
        loadCards(activeLang);
      }

      document.querySelectorAll(".lang-btn").forEach((btn) => {
        btn.addEventListener("click", () => applyLang(btn.dataset.lang));
      });

      document.getElementById("modalClose").addEventListener("click", closeModal);
      modalNode.addEventListener("click", (event) => {
        if (event.target === modalNode) {
          closeModal();
        }
      });
      window.addEventListener("keydown", (event) => {
        if (event.key === "Escape") {
          closeModal();
        }
      });

      document.querySelectorAll("[data-track]").forEach((link) => {
        link.addEventListener("click", () => {
          const eventName = link.getAttribute("data-track") || "cta_click";
          const href = link.getAttribute("href") || "";
          trackEvent(href, eventName);
        });
      });

      const initialLang = new URLSearchParams(window.location.search).get("lang");
      const storedLang = window.localStorage.getItem(LANG_STORAGE_KEY);
      const preferredLang = initialLang || storedLang || "ru";
      const resolvedLang = preferredLang && uiCopy[preferredLang] ? preferredLang : "ru";
      applyLang(resolvedLang);
    </script>
  </body>
</html>
